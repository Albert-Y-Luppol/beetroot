{"version":3,"sources":["scripts.js"],"names":["initTab","document","getElementById","noResultsTab","defaultArticleTab","tabsConatainer","fetchController","AbortController","submitController","loadResultsFlag","initSearch","forms","search","name","focus","setInitialTab","body","querySelector","append","hidden","addEventListener","handleInput","handleSubmit","handleKeys","handleTouches","e","target","closest","autofill","value","handleTouchend","once","setTimeout","removeEventListener","code","getPreviousBorder","checkedInput","currentElement","previousElementSibling","matches","getNextBorder","nextElementSibling","classList","remove","previosRoundBorderEl","nextRoundBorderEl","add","urlObject","URL","searchParams","set","abort","fetch","signal","then","response","json","movies","title","toLowerCase","slice","length","catch","err","preventDefault","select","noResults","get","showResults","removeCurrentTabs","tab","cloneNode","id","results","preloadedTabs","searchResults","window","preloadNextTab","showNextTab","loadMoreResults","movie","shift","img","src","alt","push","style","opacity","innerHTML","dataset","imdbID","showFullMovieInfo","btn","movieID","getAttribute","setRate","setStars","scrollIntoView","querySelectorAll","forEach","el","starsAmount","Math","round","stars","scrollHeight","pageYOffset","documentElement","clientHeight","tabs","circle","circleLength","offsetHeight","rate","textContent","offset","strokeDashoffset"],"mappings":"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","sourcesContent":["(function (){\r\n    'use strict';\r\n\r\n    let initTab = document.getElementById('search-start'),\r\n        noResultsTab = document.getElementById('search-no-result'),\r\n        defaultArticleTab = document.getElementById('article'),\r\n        tabsConatainer = document.getElementById('tabs-container'),\r\n        fetchController = new AbortController(),\r\n        submitController = new AbortController(),\r\n        loadResultsFlag = false; // remove the Flag >> handelld by listener\r\n    initSearch();\r\n\r\n\r\n    // functions\r\n\r\n\r\n    function initSearch(){\r\n        document.forms.search.name.focus();\r\n\r\n        setInitialTab();\r\n    }\r\n\r\n\r\n    function setInitialTab(){\r\n        document.body.querySelector('.tabs__tabs').append(initTab);\r\n        initTab.hidden = false;\r\n\r\n        document.forms.search.addEventListener('input', handleInput);\r\n\r\n        document.forms.search.addEventListener('submit', handleSubmit);\r\n\r\n        document.forms.search.addEventListener('keydown', handleKeys);\r\n\r\n        document.forms.search.addEventListener('touchstart', handleTouches);\r\n\r\n\r\n    }\r\n\r\n    function handleTouches(e){\r\n        if (e.target.closest('input[name=\"name\"].search__name') && document.forms.search.autofill.value){\r\n            document.forms.search.addEventListener('touchend', handleTouchend, {once: true});\r\n            \r\n            setTimeout(()=>{\r\n                document.forms.search.removeEventListener('touchend', handleTouchend, {once: true});\r\n            }, 1000);\r\n        }\r\n        \r\n\r\n        function handleTouchend(){\r\n            document.forms.search.name.value = document.forms.search.autofill.value;\r\n            document.forms.search.autofill.value = \"\";\r\n        }\r\n    }\r\n\r\n\r\n\r\n    function handleKeys(e){\r\n        if(e.code == 'ArrowRight'){\r\n           \r\n            document.forms.search.name.value = document.forms.search.autofill.value;\r\n            document.forms.search.autofill.value = \"\";\r\n\r\n        }\r\n    }\r\n\r\n\r\n    function handleInput(e){\r\n\r\n        if(e.target.closest('input[name=\"video-type\"]')){\r\n            \r\n            document.forms.search.querySelector('.search__radio--before').classList.remove('search__radio--before');\r\n\r\n            document.forms.search.querySelector('.search__radio--after').classList.remove('search__radio--after');\r\n\r\n            let previosRoundBorderEl = getPreviousBorder(e.target.closest('input[name=\"video-type\"]')),\r\n                nextRoundBorderEl = getNextBorder(e.target.closest('input[name=\"video-type\"]'));\r\n\r\n            previosRoundBorderEl.classList.add('search__radio--before');\r\n            nextRoundBorderEl.classList.add('search__radio--after');\r\n\r\n            function getPreviousBorder(checkedInput){\r\n                let currentElement = checkedInput.previousElementSibling;\r\n\r\n                while(currentElement != null){\r\n            \r\n                    if(currentElement.matches('.search__radio')){\r\n                        return currentElement;\r\n                    }\r\n\r\n                    currentElement = currentElement.previousElementSibling;\r\n                }\r\n\r\n                return document.forms.search.querySelector('.search__stub--left');\r\n            }\r\n\r\n            function getNextBorder(checkedInput){\r\n                let currentElement = checkedInput.nextElementSibling.nextElementSibling; //skip current label;\r\n\r\n                while(currentElement != null){\r\n\r\n                    if(currentElement.matches('.search__radio')){\r\n                        return currentElement;\r\n                    }\r\n\r\n                    currentElement = currentElement.nextElementSibling;\r\n                }\r\n\r\n                return document.forms.search.querySelector('.search__stub--right');\r\n            }\r\n\r\n        }\r\n    \r\n        //apikey bcd2d5b4\r\n\r\n        document.forms.search.autofill.value = \"\";\r\n        let urlObject = new URL('https://www.omdbapi.com');\r\n\r\n        urlObject.searchParams.set('apikey', 'bcd2d5b4');\r\n        urlObject.searchParams.set('type', `${document.forms.search.querySelector('input[name=\"video-type\"]:checked').value}`);\r\n        urlObject.searchParams.set('t', `${document.forms.search.name.value}`);\r\n        fetchController.abort();\r\n        fetchController = new AbortController();\r\n       \r\n        fetch(urlObject, {\r\n            signal: fetchController.signal\r\n        }).then(response=>response.json())\r\n        .then(movies=>{\r\n            if(movies['Response'] != 'True') return;\r\n            // console.log(movies);\r\n            let title = movies['Title'];\r\n            if(document.forms.search.name.value.toLowerCase() == title.slice(0, document.forms.search.name.value.length).toLowerCase()){\r\n                document.forms.search.autofill.value = document.forms.search.name.value + title.slice(document.forms.search.name.value.length);\r\n            }\r\n        }).catch(err=>{\r\n            if(err.name != 'AbortError') throw err;\r\n        });\r\n\r\n    }\r\n\r\n\r\n    function handleSubmit(e){\r\n        e.preventDefault();\r\n\r\n        // console.log('submited!');\r\n        document.forms.search.name.select();\r\n\r\n        let urlObject = new URL('https://www.omdbapi.com');\r\n        \r\n        urlObject.searchParams.set('apikey', 'bcd2d5b4');\r\n        urlObject.searchParams.set('type', `${document.forms.search.querySelector('input[name=\"video-type\"]:checked').value}`);\r\n        urlObject.searchParams.set('s', `${document.forms.search.name.value}`);\r\n        urlObject.searchParams.set('page', 1);\r\n        fetchController.abort();\r\n        submitController.abort();\r\n        submitController = new AbortController();\r\n       \r\n        fetch(urlObject, {\r\n            signal: submitController.signal\r\n        }).then(response=>response.json())\r\n        .then(movies=>{\r\n            // console.log(movies);\r\n            if(movies['Response'] != 'True') {\r\n                noResults();\r\n                return;\r\n            }\r\n            \r\n            urlObject.searchParams.set('page', +urlObject.searchParams.get('page') + 1);\r\n\r\n            showResults(movies, urlObject);\r\n\r\n        }).catch(err=>{\r\n            if(err.name != 'AbortError') throw err;\r\n        });\r\n\r\n    }\r\n\r\n\r\n    function noResults(){\r\n        // console.log('No such movie!');\r\n\r\n        removeCurrentTabs();\r\n\r\n        let tab = noResultsTab.cloneNode(true);\r\n        tab.id = '';\r\n        tab.hidden = false; \r\n\r\n        tabsConatainer.append(tab);\r\n    }\r\n\r\n\r\n    function showResults(results, urlObject){\r\n        // console.log(results);\r\n\r\n        removeCurrentTabs();\r\n\r\n        let preloadedTabs = [],\r\n            searchResults = results['Search'];\r\n\r\n        loadResultsFlag = true;\r\n\r\n        window.addEventListener('scroll', preloadNextTab);\r\n\r\n        preloadNextTab();\r\n\r\n\r\n        // functions\r\n\r\n\r\n        function preloadNextTab(){\r\n            // console.log(loadResultsFlag);\r\n\r\n            if(!loadResultsFlag) return;\r\n\r\n            showNextTab();\r\n            loadMoreResults();\r\n\r\n            if(searchResults.length == 0) return;\r\n\r\n            if(preloadedTabs.length > 5) return;\r\n\r\n            let tab = defaultArticleTab.cloneNode(true),\r\n                movie = searchResults.shift(),\r\n                img = tab.querySelector('.poster__img');\r\n\r\n            if(movie['Poster'] != 'N/A') {\r\n                img.src = movie['Poster'];\r\n            } else {\r\n                img.src = './img/no-cover.png';\r\n            }\r\n            \r\n            img.alt = movie['Title'];\r\n\r\n            // console.log(img);\r\n            // console.log(img.src);\r\n\r\n            img.addEventListener('load', (e)=>{\r\n                setTimeout(()=>{\r\n                    // console.log('+1 preload');\r\n                    preloadedTabs.push(tab);\r\n\r\n                    // Hide Loader\r\n                    document.getElementById('tab-loader').style.opacity = 0;\r\n\r\n                    preloadNextTab();\r\n                }, 0);\r\n            }, {once: true});\r\n\r\n            tab.querySelector('.description__title').innerHTML = `${movie['Title']}`;\r\n            tab.querySelector('.description__subtitle').innerHTML = `Released in ${movie['Year']} year`;\r\n\r\n            tab.id = \"\";\r\n            tab.dataset.imdbID = movie['imdbID'];\r\n\r\n            tab.querySelector('.description__btn').addEventListener('click', showFullMovieInfo, {once: true});\r\n        }\r\n\r\n\r\n        function showFullMovieInfo(e){\r\n            let tab = e.target.closest('.tabs__tab'),\r\n                btn = e.target.closest('.description__btn'),\r\n                movieID = tab.getAttribute('data-imdb-i-d'),\r\n                urlObject = new URL('https://www.omdbapi.com');\r\n        \r\n            urlObject.searchParams.set('apikey', 'bcd2d5b4');\r\n            urlObject.searchParams.set('i', movieID);\r\n\r\n            fetch(urlObject)\r\n            .then(response=>response.json())\r\n            .then(movie=>{\r\n                // console.log(movie);\r\n                tab.querySelector('.description__main').innerHTML = `<p>${movie['Plot'] != \"N/A\" ? movie['Plot'] : \"\" }</p>`;\r\n                if(movie['imdbRating'] != 'N/A'){\r\n\r\n                    tab.querySelector('.rate__amount').innerHTML = movie['imdbRating'];\r\n\r\n                    setRate(tab);\r\n\r\n                    setStars(tab);\r\n                }\r\n                \r\n\r\n            });\r\n\r\n            tab.classList.remove('tabs__tab--small');\r\n            btn.style.opacity = 0;\r\n            btn.addEventListener('transitionend', ()=>{\r\n                btn.remove();\r\n                tab.scrollIntoView();\r\n            }, {once: true});\r\n            tab.querySelectorAll('[class*=\"--small\"]').forEach(el=>{\r\n                el.classList.remove(el.classList[0] + '--small');\r\n            });\r\n        }\r\n\r\n\r\n        function setStars(tab){\r\n            let starsAmount = Math.round(tab.querySelector('.rate__amount').innerHTML / 2),\r\n                stars = tab.querySelectorAll('.poster__star');\r\n\r\n            while(starsAmount){\r\n                starsAmount--;\r\n                stars[starsAmount].classList.add('poster__star--full');\r\n            }\r\n        }\r\n\r\n\r\n        function showNextTab(){\r\n\r\n            if(preloadedTabs.length == 0) {\r\n\r\n                //Task show Loader\r\n\r\n                document.getElementById('tab-loader').style.opacity = 1;\r\n                \r\n                return;\r\n            }\r\n\r\n            // alert(document.body.scrollHeight - (pageYOffset + document.documentElement.clientHeight));\r\n\r\n            if(document.body.scrollHeight - (pageYOffset + document.documentElement.clientHeight) > 100) return;\r\n\r\n            // alert(document.body.scrollHeight - (pageYOffset + document.documentElement.clientHeight));\r\n\r\n            let tab = preloadedTabs.shift();\r\n\r\n    //Task --->>> animate tab\r\n            tab.classList.add('flipInX');\r\n            \r\n            tab.hidden = false;\r\n\r\n            tabsConatainer.append(tab);\r\n        }\r\n\r\n\r\n        function loadMoreResults(){\r\n            if(searchResults.length > 5) return;\r\n\r\n            submitController = new AbortController();\r\n\r\n            fetch(urlObject, {\r\n                signal: submitController.signal\r\n            }).then(response=>response.json())\r\n            .then(movies=>{\r\n                // console.log(movies);\r\n                if(movies['Response'] != 'True') {\r\n                    loadResultsFlag = false;\r\n\r\n                    window.removeEventListener('scroll', preloadNextTab);\r\n\r\n                    return;\r\n                }\r\n                \r\n                urlObject.searchParams.set('page', +urlObject.searchParams.get('page') + 1);\r\n    \r\n                searchResults.push(...movies['Search']);\r\n\r\n                preloadNextTab();\r\n    \r\n            }).catch(err=>{\r\n                if(err.name != 'AbortError') throw err;\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    function removeCurrentTabs(){\r\n\r\n        let  tabs = tabsConatainer.querySelectorAll('.tabs__tab');\r\n\r\n        tabs.forEach(tab=>{\r\n            tab.remove();\r\n        });\r\n    }\r\n\r\n    function setRate(tab){\r\n\r\n        let circle = tab.querySelector('.rate__current > circle'),\r\n            circleLength = tab.querySelector('.rate__maximal').offsetHeight * 3.14,\r\n            rate = +tab.querySelector('.rate__amount').textContent,\r\n            offset = ((10 - rate) / 10) * circleLength;\r\n            \r\n        circle.style.strokeDashoffset = offset;\r\n       \r\n    }\r\n})();\r\n"],"file":"scripts.js"}